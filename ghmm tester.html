<!DOCTYPE HTML>
<html>
<head>
	<script src="https://unpkg.com/mathjs@5.1.0/dist/math.min.js"></script>
	<script src = "ghmm.js"></script>
</head>
<body>


  <p id = "output"></p>
  <p id = "1"> </p>
  <p id = "1"> </p>
  <p id = "1"> </p>

  <script type="text/javascript">
    function argmax(array){
    	var max_index = -1;
    	var max = Number.MIN_SAFE_INTEGER;

    	array = math.squeeze(array);

    	var i = 0;
    	for(i = 0; i < array._size[0]; i++){
    		var curr = math.subset(array, math.index(i))
    		if(curr > max){
    			max = curr;
    			max_index = i;
    		}
    	}

    	return max_index;
    }

    var A = math.divide(math.matrix([[1.0, 1.0, 1.0], [1.0, 1.0, 1.0], [1.0, 1.0, 1.0]]), 3);

    var A_empirical = math.zeros(3, 3);
    var centroids = math.matrix([[0,0],[5,0],[10,0]]);

    var g = new GHMM(3,2, [1, 1, 1], [[0, 0], [0, 5], [0, 10]]);

    var Y = math.matrix([[ -0.53444326,   0.53105703],
						 [  4.42280774,  -0.33091116],
						 [  5.08549327,  -0.18446884],
						 [  9.10416968,   0.07663743],
						 [  1.89519286,   0.85514989],
						 [  5.42495952,  -0.7683202 ],
						 [  3.18751074,   0.73816069],
						 [  9.45746727,   2.2019496 ],
						 [  3.97889588,  -1.04961289],
						 [  9.47482833,  -0.13886942],
						 [  4.37413879,  -0.98640496],
						 [  5.99354287,   0.12654601],
						 [ -1.00259404,  -0.47220726],
						 [  5.907148  ,   2.31772571],
						 [  6.84598208,  -0.70958982],
						 [  5.74799964,  -0.06262804],
						 [  0.6224075 ,   0.40410208],
						 [ 10.08646412,  -1.93093278],
						 [ 10.95162941,   0.91513348],
						 [ -2.44658109,  -0.52551697],
						 [  1.79109463,   1.85101705],
						 [ 10.92543091,   0.79975773],
						 [  9.29462998,  -1.38542591],
						 [  8.29563912,  -0.37742299],
						 [  2.58557451,   1.33907898],
						 [ -0.47405137,  -1.10162402],
						 [  9.12532408,  -0.90248453],
						 [  3.77002778,   1.95509864],
						 [ -0.26901262,  -1.00907425],
						 [  9.36165658,  -1.44634447],
						 [ 10.44520843,  -0.63157269],
						 [ -0.34061461,   1.22712605],
						 [  0.75219971,   0.85383608],
						 [  6.20489707,  -0.18215124],
						 [  4.8505662 ,   1.25833293],
						 [  1.1314016 ,   1.10443714],
						 [  5.0879045 ,  -0.17865794],
						 [  3.8112592 ,   1.50233358],
						 [  4.99160482,   1.11703317],
						 [  1.91187737,  -1.54304585],
						 [  8.54021819,  -1.13794765],
						 [ -0.01273899,   0.34933941],
						 [ -0.29587227,   1.34710975],
						 [  8.77336643,   1.65785303],
						 [  9.36981221,  -1.44547786],
						 [  3.60528826,   1.48369488],
						 [ -1.0538049 ,  -0.70365691],
						 [ -0.90827612,  -0.95937063],
						 [  6.24538912,  -1.21927202],
						 [ 10.84832578,  -0.11075601],
						 [  8.5282357 ,   0.27377207],
						 [  6.50016219,   1.3536438 ],
						 [  8.95242925,   1.71360579],
						 [  7.22768827,   0.40770819],
						 [ 11.10162138,   0.94657651],
						 [  0.3977053 ,   0.91172808],
						 [  0.6281982 ,   0.78044384],
						 [ 11.53381589,  -0.62676098],
						 [ -0.49994147,   0.13706892],
						 [  5.00483786,   0.17531994],
						 [  9.28866682,   1.01646888],
						 [  5.83126563,  -2.15148684],
						 [  1.70057323,  -1.21785682],
						 [  8.0285743 ,   0.18950649],
						 [ 10.18402223,  -0.13546348],
						 [  0.96937456,   1.5173367 ],
						 [  2.92058867,   0.09456283],
						 [ -1.13793299,   1.66647889],
						 [  4.35378751,   1.05944725],
						 [  0.3171424 ,   0.67600058],
						 [  9.36291174,   0.09456549],
						 [  8.86129694,   3.34670213],
						 [  5.15470781,  -1.44239202],
						 [  9.79139161,  -0.43327216],
						 [  1.43758278,   0.54878328],
						 [ -1.35694734,   0.06082205],
						 [  9.34164595,  -2.62709245],
						 [  0.07693585,  -0.45530015],
						 [  0.72588815,   0.69180412],
						 [  6.13030394,   0.46878532],
						 [  1.25784588,  -1.31171938],
						 [ -1.18552084,  -0.55479887],
						 [ -1.52754501,   0.24121133],
						 [  1.85819783,  -1.98875171],
						 [  5.85903502,  -0.38744965],
						 [ -0.18442888,   0.48316659],
						 [  1.65703174,  -1.62858161],
						 [ -0.03475071,  -0.38780238],
						 [  5.73157157,  -0.06891592],
						 [  9.71427562,  -0.37829641],
						 [ -0.04873135,  -0.61092625],
						 [ -2.44335497,  -0.08866314],
						 [ 10.07340708,   0.36330948],
						 [  9.82094588,   0.84157584],
						 [  0.45814004,  -1.33145878],
						 [ 11.09943058,   3.67282334],
						 [ -1.41138135,  -0.98634959],
						 [ 10.44420482,  -1.33964691],
						 [ -0.40293843,   0.20824684],
						 [  5.42580032,   0.34888847]]);

	var Y_test = math.matrix([[  8.08191315,  -0.77722766],
							 [  2.10476237,   0.96024471],
							 [ -2.31094356,  -0.70339401],
							 [  5.8080071 ,  -0.50788708],
							 [  4.75458619,   0.19957576],
							 [  6.39673703,  -1.50273054],
							 [  5.20863073,  -1.0515493 ],
							 [  4.47831272,   0.59066094],
							 [  4.61098295,  -0.30234744],
							 [  4.36869283,  -1.40700271],
							 [ 10.3603599 ,   0.80112919],
							 [ 10.78014754,  -1.21822332],
							 [  0.27460606,   0.2138351 ],
							 [  6.54448394,  -0.07916952],
							 [ 10.55545269,  -0.48625477],
							 [  5.62039015,  -1.00354536],
							 [ 11.23284701,  -0.5633273 ],
							 [  5.88059158,  -0.7837618 ],
							 [ -0.44604662,  -0.08895538],
							 [ 11.41977188,   0.64408791],
							 [  5.75119629,   0.1720986 ],
							 [  4.74325652,   0.84435601],
							 [  6.27489922,  -0.83646971],
							 [  4.80610356,   0.45511675],
							 [ 11.94448596,   1.46204527],
							 [  3.80496528,   0.26913018],
							 [  9.40738107,  -1.13665196],
							 [  0.13315102,   0.22576109],
							 [  4.79558731,   1.5825799 ],
							 [ 10.31254278,   1.05263001],
							 [ -0.30746215,  -1.15542626],
							 [  8.72827636,   1.5020266 ],
							 [  4.75850423,   0.28832343],
							 [  9.90045465,   0.481499  ],
							 [  4.46372465,  -0.36713786],
							 [ 10.46962134,  -0.92501372],
							 [  8.81153704,  -0.55291197],
							 [  5.92230953,  -2.02805332],
							 [ -0.43239295,   0.60643167],
							 [  8.60661488,  -0.95148949],
							 [ 10.54307268,   0.1863627 ],
							 [  9.87686666,  -0.20409513],
							 [  5.66932582,   1.25390721],
							 [  0.3525309 ,   1.37688693],
							 [  1.56737241,  -0.58781893],
							 [  5.19179946,   0.67121036],
							 [ -0.34932267,   1.36772162],
							 [  6.36259943,   1.34692747],
							 [ 10.40671441,  -0.38777186],
							 [  0.2672477 ,  -0.33057387],
							 [ 12.18130697,  -0.04476821],
							 [ -0.02517269,   1.86808284],
							 [  9.04412468,   1.45633431],
							 [  0.55146748,  -0.08111873],
							 [  4.26108186,   0.31509132],
							 [  0.18910704,   2.38802659],
							 [ -1.56646317,  -0.62366173],
							 [  4.74249842,   0.22830798],
							 [  0.29517544,  -0.57949919],
							 [ 11.13375386,   1.81394871],
							 [  4.9969908 ,   0.73537824],
							 [  5.17158769,  -0.46309176],
							 [ -0.4289381 ,   0.85945564],
							 [  4.34949072,  -0.61751062],
							 [ 10.40179147,   0.05878276],
							 [ 10.82321905,   0.272663  ],
							 [  0.80867062,   0.42401621],
							 [ 10.34400416,  -0.82512426],
							 [ -0.09158449,  -0.73691213],
							 [  3.76457861,  -1.8028644 ],
							 [ 10.09606883,  -0.41034528],
							 [  4.19203184,   1.06061918],
							 [ 10.74007272,  -0.52210196],
							 [ 12.58813088,  -0.25281112],
							 [  9.90380069,  -0.30581467],
							 [  5.29199129,   0.67326348],
							 [ -1.90565103,  -0.21593272],
							 [  9.1652878 ,  -2.38941706],
							 [  9.12372695,   0.34188977],
							 [  0.03619726,  -1.93094393],
							 [ 10.46963001,   1.77753013],
							 [  7.55971937,   1.67306754],
							 [ 11.80676643,   1.3423776 ],
							 [  9.53779901,   0.17860498],
							 [ 11.38003784,  -0.62145017],
							 [ 10.55240398,   0.45068421],
							 [ -0.21267969,  -1.63549522],
							 [  5.13261455,   0.59645725],
							 [  0.76207482,   0.3915358 ],
							 [  5.61251062,   1.48201709],
							 [  0.36327805,   0.99271391],
							 [  9.07098573,   0.14482298],
							 [ 11.41955678,  -1.40674486],
							 [ -1.20574154,  -1.76389869],
							 [ 10.1641122 ,  -1.50344784],
							 [  4.34181402,   0.35296806],
							 [  5.41425763,   0.31585014],
							 [ -1.09155773,  -0.58401527],
							 [  0.50791359,  -0.24772976],
							 [  4.25188023,  -1.20348342]]);

	g.train(Y);

   	var Y_test1 = [];
    var Y_test2 = [];
    var Y_test3 = [];

    var pred = 0;
    for(i = 0; i < 100; i++){
    	var y = math.squeeze(math.subset(Y_test, math.index(i, [0, 1])));
    	pred = argmax(g.evaluate(y));

    	if(pred == 1){
    		Y_test1.push(y);
    	} else if(pred == 2){
    		Y_test2.push(y);
    	}else {
    		Y_test3.push(y);
    	}
    }

    window.alert(Y_test1);
    window.alert(Y_test2);
    window.alert(Y_test3);

    // document.getElementById("1").innerHTML = Y_test1;
    // document.getElementById("2").innerHTML = Y_test2;
    // document.getElementById("3").innerHTML = Y_test3;
  </script>

</body>
</html>